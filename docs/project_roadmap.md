# Alpha-Predator 项目实施路线图

## 1. 项目实施步骤 (当前状态)

**Alpha-Predator** 是一个 AI 驱动的量化分析系统，旨在利用 LLM 和技术指标提供深入的股市数据洞察。

### 第一阶段：基础设施与核心框架
- [x] **后端搭建**: 基于 **FastAPI** 构建高性能 REST API。
- [x] **前端搭建**: 使用 **Vue 3** + **Vite** 开发响应式现代用户界面。
- [x] **数据库层**: 实现 **SQLite** + **SQLAlchemy**，用于轻量级、无服务器的用户持仓持久化存储 (`src/database.py`, `src/models.py`)。

### 第二阶段：数据工程
- [x] **数据源抽象**: 创建 `DataSourceFactory` 以在 **Tushare** (Pro 数据) 和 **AkShare** (开源数据) 之间切换。
- [x] **数据获取**: 实现健壮的客户端 (`TushareClient`) 以获取：
    - 实时行情
    - 日/周/月 K 线
    - 基本面数据 (PE, PB, 市值)
    - 资金流向 (北向/南向)
    - 公司公告 (业绩预告, 分红)

### 第三阶段：核心分析引擎
- [x] **深度诊疗 (Deep Dive)**: 针对特定股票聚合数据的核心逻辑 (`src/core/deep_dive.py`)。
- [x] **技术分析**: 集成标准指标 (MA, MACD, KDJ, RSI) 以评估趋势强度。
- [x] **LLM 集成**: 连接 **Google Gemini** / **OpenAI** 以解读原始数据并生成人类可读的报告 (`src/ai/llm`)。

### 第四阶段：功能实现
- [x] **市场概览**: 显示实时指数状态的仪表盘 (红涨/绿跌指示)。
- [x] **持仓管理**: 用户持仓的增删改查 (CRUD) 操作，并持久化到数据库。
- [x] **智能诊断**:
    - 自动合并重复持仓条目。
    - 计算加权平均成本。
    - 生成持仓的 PDF/Markdown 报告。

---

## 2. 优化机会 (未来工作)

### 🏗️ 架构与性能
1.  **异步任务队列 (Celery/Redis)**
    -   *现状*: 分析是同步运行的，会阻塞 HTTP 请求 (在大持仓量时导致超时)。
    -   *优化*: 将 Deep Dive 分析卸载到后台 Worker。使用 WebSocket 推送进度更新到前端。
2.  **缓存层 (Redis)**
    -   *现状*: 对同一股票的重复请求会重新获取数据。
    -   *优化*: 缓存价格数据和 API 响应 (例如 5 分钟)，以减少延迟并节省 API 配额。
3.  **连接池**
    -   确保 SQLAlchemy 连接池针对并发请求进行了优化。

### 🧠 智能与策略
1.  **回测引擎**
    -   实现回测器 (例如使用 `Backtrader`) 以根据历史数据验证 "买入/卖出" 信号。
2.  **因子分析**
    -   超越基本技术指标。添加多因子模型 (价值, 动量, 质量, 波动率)。
3.  **情绪分析**
    -   爬取新闻标题并使用 LLM 对市场情绪进行评分 (恐惧/贪婪指数)。

### 🛠️ 代码质量与稳定性
1.  **单元与集成测试**
    -   *现状*: 手动测试。
    -   *优化*: 为后端逻辑添加 `pytest` (特别是严格测试持仓合并逻辑和 API 客户端)。
2.  **错误处理**
    -   提高 Tushare/API 的错误恢复能力。为限流请求添加自动重试。
3.  **配置管理**
    -   将硬编码的阈值 (例如 RSI > 80) 移至配置文件 (`config.yaml`) 以便于调整。

### 🎨 UI/UX 增强
1.  **移动端适配**
    -   优化 `Dashboard` 和 `PortfolioManager` 布局以适应移动屏幕 (响应式 CSS)。
2.  **主题定制**
    -   添加亮色/暗色模式切换 (目前是硬编码或依赖系统)。
3.  **交互式图表**
    -   在报告中用交互式 K 线图 (`ECharts` 或 `TradingView Lightweight Charts`) 替换静态指标列表。

### 🔒 安全性
1.  **用户认证**
    -   目前是单用户。添加 JWT 认证以支持多用户和私有投资组合。
2.  **API 密钥管理**
    -   加密存储 Tushare/LLM API 密钥，而不是使用明文 `.env` 或 localStorage。
